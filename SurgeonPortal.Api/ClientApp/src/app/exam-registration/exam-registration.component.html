<div class="flex align-items-end flex-wrap col-12 margin-bottom-2">
  <div>
    <h1>General Surgery Exam Registration</h1>
    <p>
      This year, the exam will be completely virtual via Zoom. The registration
      deadline is September 1st. Dates are filed on a first-come, first-served
      basis.
    </p>
    <p>
      <strong>
        Failure to select a CE date for the academic year is considered a lost
        exam opportunity.</strong
      >
      A final assignment means you have a guaranteed spot, but it is irrevocable
      and unchangeable one given. Once you have received a final assignment,
      exam fees will not be refunded if you subsequently change your mind or
      fail to show up.
    </p>
    <p>
      Please allow 5-10 business days for your registration to be processed.
      Once processed, your exam date will be posted on your Exam Records and
      Results page under Active Examinations.
    </p>
  </div>
</div>

<section>
  <div class="grid">
    <!-- Site Selection -->
    <sl-card class="col-12" *ngIf="(siteSelectionPicklist$ | async)?.length">
      <abs-collapse-panel [panelId]="1" [startExpanded]="true">
        <div class="flex justify-content-between panel-header" panel-header>
          <h5 class="mt-0 mb-2">Site Selection</h5>
          <div
            class="status {{
              (siteSelection$ | async) ? 'completed' : 'alert'
            }}"
          >
            {{ siteSelection$ | async }} General Surgery Certifying Exam
            (Virtual) Assigned
          </div>
        </div>
        <div class="flex align-items-end flex-wrap col-12 margin-bottom-2">
          <form [formGroup]="examRegistrationFormData">
            <div class="form-description mb-3">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed
              neque nec dolor lacinia interdum quis nec nisi. Pellentesque dolor
              erat, egestas sit amet tortor at, condimentum tempor erat. All
              fields are required.
            </div>
            <div class="grid">
              <div
                *ngFor="let option of siteSelectionPicklist$ | async"
                class="col-12 md:col-12"
              >
                <div class="flex flex-column gap-3">
                  <p-radioButton
                    [value]="option.itemValue"
                    [label]="option.itemDescription ?? ''"
                    [formControlName]="'siteSelection'"
                  ></p-radioButton>
                </div>
              </div>
              <div class="col-12 align-right mt-3">
                <p-button styleClass="p-button-link p-button-primary"
                  >Cancel</p-button
                >
                <p-button
                  [style]="{ width: '337px' }"
                  (click)="handleSiteSelectionSubmit()"
                  >Save</p-button
                >
              </div>
            </div>
          </form>
        </div>
      </abs-collapse-panel>
    </sl-card>

    <!-- Exam Intentions Form -->
    <sl-card class="col-12" *ngIf="examIntentions$ | async as examIntention">
      <abs-collapse-panel [panelId]="2" [startExpanded]="true">
        <div class="flex justify-content-between panel-header" panel-header>
          <h5 class="mt-0 mb-2">Exam Intentions</h5>
          <div
            class="status {{
              examIntention.dateReceived ? 'completed' : 'alert'
            }}"
          >
            {{
              examIntention.dateReceived
                ? 'Confirmed ' +
                  (examIntention.dateReceived | date : 'longDate')
                : 'Not Confirmed'
            }}
          </div>
        </div>

        <div class="form-description mb-5">
          Please confirm that you intend to take the upcoming examination.
        </div>
        <form [formGroup]="examRegistrationFormData">
          <div class="col-12 flex align-items-center gap-2 mb-3">
            <p-checkbox
              inputId="acknowlegement"
              [formControlName]="'examIntention'"
              [binary]="true"
            ></p-checkbox>
            <label for="userConfirmed">
              I will take the examination {{ examIntention.examName }} as
              offered, on {{ examIntention.examDate | date : 'longDate' }}
            </label>
          </div>
          <div class="col-12 align-right mt-3">
            <p-button
              [style]="{ width: '200px' }"
              (click)="handleSubmitExamIntention()"
              [disabled]="examIntention.intention === true"
              >Submit</p-button
            >
          </div>
        </form>
      </abs-collapse-panel>
    </sl-card>

    <!-- Exam Registration Fee -->
    <sl-card class="col-12">
      <abs-collapse-panel [panelId]="3" [startExpanded]="true">
        <div class="flex justify-content-between panel-header" panel-header>
          <h5 class="mt-0 mb-2">Exam Registration Fee</h5>
          <div
            class="status {{
              payFeeData.remainingBalance <= 0 ? 'completed' : 'alert'
            }}"
          >
            Amount Owed: {{ payFeeData.remainingBalance | currency }}
          </div>
        </div>

        <abs-pay-fee
          [payFeeData]="payFeeData"
          [paymentGridData]="applicationFee$ | async"
        >
          <strong
            >To avoid additional fees, all items must be received by deadline.
            See also <a href="#">Dates & Fees</a>.</strong
          >
        </abs-pay-fee>
      </abs-collapse-panel>
    </sl-card>

    <!-- Digital Signature-->
    <sl-card class="col-12">
      <abs-collapse-panel [panelId]="4" [startExpanded]="true">
        <div class="flex justify-content-between panel-header" panel-header>
          <h5 class="mt-0 mb-2">Digital Signature</h5>
          <div class="status completed">Completed</div>
        </div>

        <ul>
          <li>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus
            sodales condimentum orci, id malesuada ante faucibus eu. Sed ut
            perspiciatis unde omnis iste natus error sit voluptatem accusantium
            doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo
            inventore veritatis et quasi architecto beatae vitae dicta sunt
            explicabo.
          </li>
          <li>
            Maecenas eros arcu, mattis ut urna id, convallis eleifend purus.
            Phasellus sodales condimentum orci, id malesuada ante faucibus eu.
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas
            eros arcu, mattis ut urna id, convallis eleifend purus.
          </li>
          <li>
            Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut
            fugit, sed quia consequuntur magni dolores eos qui ratione
            voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem
            ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non
            numquam eius modi tempora incidunt ut labore et dolore magnam
            aliquam quaerat voluptatem.
          </li>
          <li>
            Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis
            suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur?
          </li>
          <li>
            Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse
            quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat
            quo voluptas nulla pariatur?
          </li>
        </ul>
        <div class="col-12 flex align-items-center gap-2 mb-3">
          <p-checkbox
            inputId="acknowlegement"
            name="acknowlegement"
            (change)="handleDigitalSignatureChange($event)"
            [binary]="true"
          ></p-checkbox>
          <label for="userConfirmed"
            >I agree to the following statements above to the fullest of my
            knowledge</label
          >
        </div>

        <p-button (click)="handleDownloadForm()" class="btn-add">
          <i slot="prefix" class="fa-solid fa-download"></i>
          <span>Download Form</span>
        </p-button>
      </abs-collapse-panel>
    </sl-card>

    <!-- Exam Admission Card / Authorization Letter Status -->
    <sl-card class="col-12">
      <abs-collapse-panel [panelId]="6" [startExpanded]="true">
        <div class="flex justify-content-between panel-header" panel-header>
          <h5 class="mt-0 mb-2">
            Exam Admission Card / Authorization Letter Status
          </h5>
          <div class="status completed">Posted 10/20/2022</div>
        </div>

        <div class="form-description mb-5">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sed
          neque nec dolor lacinia interdum quis nec nisi. Pellentesque dolor
          erat, egestas sit amet tortor at, condimentum tempor erat. All fields
          are required.
        </div>
        <p-button (click)="handleDownloadForm()" class="btn-add">
          <i slot="prefix" class="fa-solid fa-download"></i>
          <span>Download Exam Admission Card</span>
        </p-button>
      </abs-collapse-panel>
    </sl-card>
  </div>
</section>
